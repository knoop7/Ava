# 天气显示

天气显示功能可以在屏幕上显示实时天气信息。

> **开发中**: 屏幕显示系统正在持续开发中，计划支持多种显示效果，包括梦幻时钟、AI 回复显示等。部分功能可能尚未完全实现。

---

## 概述

天气显示是一个全屏悬浮窗，显示当前城市的天气信息，包括温度、天气状况、湿度、风向等。

**⚠ 重要提示：天气功能仅支持中国城市！**

---

## 显示内容

```
┌─────────────────────────────────────┐
│                                     │
│           25°C                    │
│           晴                        │
│                                     │
│  ┌─────┬─────┬─────┐               │
│  │湿度 │空气 │气压 │               │
│  │ 65% │ 45  │1013 │               │
│  │     │ AQI │ HPA │               │
│  ├─────┼─────┼─────┤               │
│  │风速 │PM2.5│风向 │               │
│  │ 3.2 │ 28  │ N   │               │
│  │KM/H │ μg  │     │               │
│  └─────┴─────┴─────┘               │
│                                     │
└─────────────────────────────────────┘
```

### 信息说明

| 信息 | 单位 | 说明 |
|------|------|------|
| 温度 | °C | 当前温度 |
| 天气状况 | - | 晴/多云/雨等 |
| 湿度 | % | 空气湿度 |
| 空气质量 | AQI | 空气质量指数 |
| 气压 | HPA | 大气压强 |
| 风速 | KM/H | 风速 |
| PM2.5 | μg/m³ | PM2.5浓度 |
| 风向 | - | 风向（N/S/E/W） |

---

## 天气状况

### 支持的天气类型

| 状况 | 中文 | 英文 | 图标 |
|------|------|------|------|
| sunny | 晴 | Sunny |  |
| cloudy | 多云 | Cloudy |  |
| light_rain | 小雨 | Light Rain |  |
| rainy | 雨 | Rain |  |
| heavy_rain | 大雨 | Heavy Rain |  |
| light_snow | 小雪 | Light Snow |  |
| snowy | 雪 | Snow |  |
| heavy_snow | 大雪 | Heavy Snow |  |
| fog | 雾 | Fog |  |
| haze | 霾 | Haze |  |
| wind | 大风 | Windy |  |
| sandstorm | 沙尘暴 | Sandstorm |  |

---

## 设置城市

### 如何设置

1. 进入 **设置** → **交互**
2. 打开 **天气显示** 开关
3. 点击 **选择城市**
4. 依次选择：
   - 省份（如：北京）
   - 城市（如：北京市）
   - 区县（如：海淀区）

### 城市数据

城市数据来自内置的 `areas.json` 文件，包含中国所有省市区县。

---

## 数据来源

天气数据来自以下 API：

| 数据 | 来源 |
|------|------|
| 城市坐标 | 百度地图 API |
| 天气信息 | 中国天气网 API |
| 空气质量 | 中国天气网 API |

**刷新频率：** 每 60 秒自动刷新一次

---

## 交互操作

### 双击切换

双击天气界面可以隐藏/显示天气。

### 左滑切换

左滑天气界面可以切换到梦幻时钟。

---

## 梦幻时钟

> **开发中**: 梦幻时钟功能正在开发中，部分效果可能尚未完全实现。

梦幻时钟是另一个全屏显示，与天气显示可以互相切换。

### 显示内容

```
┌─────────────────────────────────────┐
│                                     │
│                                     │
│           12:34                     │
│                                     │
│          25°C                     │
│                                     │
│                                     │
└─────────────────────────────────────┘
```

### 如何开启

1. 进入 **设置** → **交互**
2. 打开 **梦幻时钟** 开关

### 切换方式

- 在天气界面左滑 → 切换到时钟
- 在时钟界面左滑 → 切换到天气

---

## 设置汇总

| 设置项 | 位置 | 说明 | 默认值 |
|--------|------|------|--------|
| 天气显示 | 交互 | 启用天气悬浮窗 | 关闭 |
| 选择城市 | 交互 | 设置天气城市 | 空 |
| 梦幻时钟 | 交互 | 启用时钟悬浮窗 | 关闭 |

---

## Home Assistant 控制

天气和时钟通过开关实体控制。

### 显示/隐藏天气

```yaml
# 显示天气
service: switch.turn_on
target:
  entity_id: switch.your_device_name_weather_overlay

# 隐藏天气
service: switch.turn_off
target:
  entity_id: switch.your_device_name_weather_overlay
```

### 显示/隐藏时钟

```yaml
# 显示时钟
service: switch.turn_on
target:
  entity_id: switch.your_device_name_dream_clock

# 隐藏时钟
service: switch.turn_off
target:
  entity_id: switch.your_device_name_dream_clock
```

---

## 常见问题

### 天气不显示？

1. 检查是否已选择城市
2. 检查网络连接
3. 检查悬浮窗权限
4. 确认选择的是中国城市

### 天气数据不准确？

1. 天气数据来自中国天气网，可能有延迟
2. 确认选择的城市/区县正确
3. 等待下次自动刷新（60秒）

### 为什么只支持中国城市？

天气 API 使用的是中国天气网，只提供中国城市的数据。如需其他地区天气，可以考虑使用网页屏保显示天气网站。

### 英文环境下天气不显示？

天气功能在英文环境下默认隐藏设置开关，因为 API 只支持中国城市。如果你在中国使用英文系统，可以手动修改设置。

---

*返回 [首页](Home.md)*
