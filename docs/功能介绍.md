# 🏠 Ava - Android 智能语音助手

> 把你的 Android 设备变成 Home Assistant 智能家居语音控制中心

基于 [ESPHome](https://esphome.io/) 协议的实验性 Android 语音助手，专为墙壁平板等固定设备设计。

---

## ⚠️ 使用须知

本应用适用于**可信局域网内的固定设备**（如墙壁平板），不建议在手机上使用：

- 📡 设备作为 ESPHome 服务端，无身份验证，请勿在公共网络使用
- 🎤 持续监听唤醒词，会消耗电量，非系统应用无法像内置助手那样"被动"监听
- 📱 需要 Android 8.0 及以上版本

---

## ✨ 核心功能

### 🎤 语音交互
- **本地唤醒词检测** - 基于 microWakeWord，完全离线
- **停止词检测** - 随时打断对话
- **语音命令** - 控制智能家居
- **播报与对话** - TTS 语音反馈
- **连续对话** - 无需重复唤醒
- **定时器** - 语音设置提醒

### 🔊 媒体播放
- 完整的音乐播放控制
- 黑胶唱片风格封面显示
- 唤醒/预播报提示音
- 麦克风静音开关

---

## �早 重磅新功能

### � 蓝警牙中继器
将 Android 设备变成蓝牙网关，扩展 Home Assistant 的蓝牙覆盖范围！

- 🔄 **蓝牙代理** - 转发 BLE 数据到 HA
- 📍 **扩展覆盖** - 多设备部署，全屋覆盖
- 🏠 **在场检测** - 检测手机/手环是否在家
- ⚙️ **灵活配置** - 可调 RSSI 阈值和延迟

### 📺 丰富悬浮窗

| 悬浮窗 | 说明 |
|--------|------|
| 🕐 梦幻时钟 | 优雅桌面时钟 |
| 🌤️ 天气预报 | 实时天气信息 |
| 💬 对话字幕 | 显示语音内容 |
| 💿 唱片封面 | 音乐播放时显示 |
| 🖼️ 图片屏保 | 自定义图片 |
| 🌐 网页屏保 | 嵌入任意网页 |

### 🔔 通知场景
**70+ 精美全屏通知**：早安晚安、门铃访客、烟雾报警、生日祝福、定时提醒...还支持自定义！

### 📷 摄像头功能
- 📸 远程拍照
- 🎬 实时视频流
- 前后摄像头切换

### 📡 传感器上报
- � 光摄照 / 🧲 磁场 / 👋 接近感应
- 📶 WiFi信号 / 🔋 电池状态
- � *存储空间 / 🧠 内存使用

---

## 🎤 可选唤醒词

| 唤醒词 | 风格 |
|--------|------|
| Hey Jarvis | 钢铁侠 |
| Alexa | 经典助手 |
| Okay Nabu | HA 官方 |
| Hey Home Assistant | 直呼其名 |
| Hey Luna | 温柔月亮 |
| Hey Mycroft | 开源助手 |
| Okay Computer | 极客风 |
| Hey Peppa Pig | 童趣可爱 |
| Choo Choo Homie | 趣味火车 |

---

## 🚀 快速开始

### 安装配置
1. 安装并运行应用
2. （可选）修改卫星名称和端口
3. 启动卫星服务，将在后台持续运行

### Home Assistant 配置
1. 打开 ESPHome 集成
2. 通常会自动发现设备，否则手动添加（IP + 端口，默认 6053）
3. 完成语音助手设置向导

### 应用设置
连接后可在 HA 中完整配置，也可在应用内调整：

| 设置 | 说明 |
|------|------|
| 名称 | 卫星显示名称（需重启服务） |
| 端口 | 监听端口（需重启服务） |
| 唤醒词 | 建议从 HA 端修改以保持同步 |
| 唤醒音 | 唤醒时是否播放提示音 |

---

## � 音频处理

- **回声消除 (AEC)** - 播放时也能唤醒
- **自动增益 (AGC)** - 自动调节音量
- **噪声抑制** - 过滤环境噪音
- **GPIO 控制** - 支持专业麦克风阵列

---

## 🌐 内嵌浏览器

- 📜 JS/CSS 注入
- 🔄 自动刷新
- 📱 手势控制
- 🔗 远程命令

---

## 🔋 稳定运行

- 电池优化豁免
- WiFi 唤醒锁
- 自动重连
- 开机自启
- Root 保活（可选）

---

## 📊 功能统计

| 项目 | 数量 |
|------|------|
| 唤醒词 | 9 个 |
| 通知场景 | 70+ 个 |
| 悬浮窗 | 6 种 |
| 传感器 | 10+ 种 |
| HA 实体 | 35+ 个 |

---

## 🛠️ 开发调试

```bash
# 克隆仓库
git clone <repo-url>

# Android Studio 打开项目

# 模拟器调试（端口转发）
telnet localhost 5554
redir add tcp:6053:6053
```

---

## 📱 适用场景

- 🖼️ **墙壁平板** - 智能家居控制面板
- 🛏️ **床头设备** - 语音闹钟助手
- 🍳 **厨房平板** - 定时器和食谱
- 📺 **客厅设备** - 媒体控制中心

---

## 🔗 相关链接

- 🏠 [Home Assistant](https://www.home-assistant.io/)
- 📡 [ESPHome](https://esphome.io/)
- 🎤 [microWakeWord](https://github.com/kahrendt/microWakeWord)

---

**让旧设备焕发新生，成为智能家居的一部分！** 🎉
