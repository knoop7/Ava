# Ava 用户指南

> 🌟 让你的安卓设备变成智能家居中控屏！

---

## 📱 Ava 是什么？

Ava 是一个基于 ESPHome 协议的语音助手应用。它可以让你的安卓设备变成 Home Assistant 的语音卡片。

**你可以用它做什么？**
- 🎤 用语音控制智能家居设备（开灯、关空调、播放音乐等）
- 📺 显示漂亮的屏保和时钟
- 🌤️ 显示实时天气信息
- 🔔 显示全屏通知（门铃、警报等）
- 🎵 播放音乐并显示专辑封面
- 📷 拍照和视频流

把你的旧手机或平板放在家里，它就变成了一个智能中控屏！

**系统要求：**
- Android 7.0 或更高版本
- 需要连接 Home Assistant

---

## 🚀 快速开始

### 第一步：安装

1. 下载 Ava 的 APK 文件
2. 点击安装
3. 允许所有权限请求（麦克风、悬浮窗等）

### 第二步：连接 Home Assistant

**在 Home Assistant 中：**
1. 进入 **设置** → **设备与服务** → **集成**
2. 搜索并添加 **ESPHome** 集成
3. Ava 会自动被发现，点击 **配置**

**在 Ava 应用中：**
1. 打开 Ava 应用
2. 点击右上角的 **设置** 图标
3. 选择 **语音卫星**
4. 点击 **启动服务**

**连接成功后：**
- 状态栏会显示“已连接”
- 你可以在 Home Assistant 中看到这个设备

### 第三步：说话！

说出唤醒词（默认是 "Hey Jarvis"），然后说出你的命令：

- "打开客厅的灯"
- "现在几点了"
- "播放音乐"
- "明天天气怎么样"

---

## ⚙️ 功能介绍

### 🎤 语音控制

**工作原理：**
1. Ava 一直在听唤醒词
2. 当你说出唤醒词时，Ava 开始录音
3. 录音发送到 Home Assistant 进行识别
4. Home Assistant 返回回复，Ava 播放语音

**怎么用：**
1. 说出唤醒词（比如 "Hey Jarvis"）
2. 听到提示音后，说出你的命令
3. Ava 会用语音回答你

**在哪里设置：** 设置 → 语音卫星

**可以设置的内容：**

| 设置项 | 说明 | 默认值 |
|--------|------|--------|
| 设备名称 | 在 Home Assistant 中显示的名字 | 设备型号_voice_assistant |
| 端口 | ESPHome 通信端口 | 6053 |
| 唤醒词 | 触发语音识别的词 | Hey Jarvis |
| 停止词 | 打断当前对话的词 | Stop |
| 唤醒提示音 | 开始录音时的提示音 | 可选择或关闭 |
| 静音 | 关闭麦克风 | 关闭 |

**支持的唤醒词：**
- Hey Jarvis
- Alexa
- Hey Google
- OK Google
- 更多...

---

### 🖼️ 屏保

**是什么：** 设备空闲一段时间后，自动显示漂亮的屏保。

**有哪些屏保：**
- **图片屏保**：显示你选择的图片
- **网页屏保**：显示网页内容
- **小米画报**：显示时间、日期、古诗词（很漂亮！）

**在哪里设置：** 设置 → 屏保

**可以设置的内容：**
| 选项 | 说明 |
|------|------|
| 屏保开关 | 打开或关闭屏保 |
| 超时时间 | 多久不操作后显示屏保（比如 30 秒） |
| 屏保类型 | 选择图片还是网页 |
| 网页地址 | 如果选网页，填写网址 |

---

### 🌤️ 天气显示

**是什么：** 在屏幕上显示当前天气信息。

**显示哪些信息：**
- 温度
- 天气状况（晴、多云、雨等）
- 湿度
- 风向和风速
- 空气质量

**⚠️ 注意：** 天气功能只支持中国城市！

**在哪里设置：** 设置 → 交互 → 天气

**怎么设置城市：**
1. 打开天气开关
2. 选择省份
3. 选择城市
4. 选择区县

---

### 🔔 通知场景

**是什么：** 当智能家居有事件发生时，全屏显示漂亮的通知。

**内置场景列表：**

| 场景 ID | 场景名称 | 用途 |
|---------|---------|------|
| morning | 早安，新的一天 | 每日早安问候 |
| doorbell | 有人按门铃 | 门铃提醒 |
| water_leak | 漏水警报 | 水浸传感器触发 |
| smoke | 烟雾警报 | 烟雾传感器触发 |
| someone_home | 有人回家了 | 在家检测 |
| package | 快递到了 | 快递通知 |
| timer | 计时器结束 | 定时器提醒 |
| weather_alert | 天气警报 | 恶劣天气提醒 |

**在哪里设置：** 设置 → 交互 → 通知场景

**可以设置的内容：**
| 设置项 | 说明 |
|--------|------|
| 显示时长 | 通知显示多久后自动消失（5-30秒） |
| 提示音 | 通知出现时播放的声音 |
| 自定义场景 URL | 加载网络上的自定义场景 |

**在 Home Assistant 中触发：**
```yaml
service: esphome.your_device_name_notification_scene
data:
  scene: "doorbell"  # 场景 ID
```

---

### 🎵 音乐播放

**是什么：** Ava 可以播放音乐，还会显示漂亮的专辑封面。

**特色功能：**
- 黑胶唱片风格的封面显示
- 支持网易云音乐封面自动获取
- 语音播报（TTS）

**在哪里设置：** 设置 → 交互

**可以设置的内容：**
| 设置项 | 说明 |
|--------|------|
| 音量 | 媒体播放音量 |
| 黑胶唱片封面 | 播放音乐时显示专辑封面 |
| 对话字幕 | 显示语音对话内容 |

**在 Home Assistant 中播放音乐：**
```yaml
service: media_player.play_media
target:
  entity_id: media_player.your_device_name
data:
  media_content_id: "http://example.com/music.mp3"
  media_content_type: "music"
```

---

### 📷 摄像头

**是什么：** 可以用设备的摄像头拍照或录视频。

**能做什么：**
- 拍照发送到 Home Assistant
- 实时视频流（MJPEG 格式）
- 支持前置和后置摄像头

**在哪里设置：** 设置 → 实验功能 → 摄像头

**可以设置的内容：**
| 设置项 | 说明 |
|--------|------|
| 启用摄像头 | 开启摄像头功能 |
| 使用前置摄像头 | 默认使用前置还是后置 |
| 视频帧率 | 1-15 fps |
| 视频分辨率 | 240p-720p |

**在 Home Assistant 中查看：**
- 摄像头会作为 camera 实体出现
- 可以在仪表盘中添加摄像头卡片

---

### 🌐 内嵌浏览器

**是什么：** 可以在 Ava 里面显示网页。

**能做什么：**
- 显示 Home Assistant 仪表盘
- 显示任何网页
- 可以注入自定义 CSS/JS
- 支持下拉刷新

**在哪里设置：** 设置 → 浏览器

**可以设置的内容：**
| 设置项 | 说明 |
|--------|------|
| 主页 URL | 默认打开的网页地址 |
| 渲染模式 | 硬件/软件渲染 |
| 自定义 CSS | 注入自定义样式 |
| 自定义 JS | 注入自定义脚本 |

**在 Home Assistant 中控制：**
```yaml
service: esphome.your_device_name_ha_remote_url
data:
  url: "http://your-ha-address:8123/lovelace/0"
```

---

## 🔧 常见问题

### Ava 听不到我说话？

**检查这些：**
1. 麦克风权限是否已授予？
   - 去手机设置 → 应用 → Ava → 权限 → 麦克风 → 允许
2. 唤醒词设置对不对？
   - 设置 → 语音卫星 → 唤醒词
3. 设备是不是静音了？
   - 检查音量按钮

---

### 连接不上 Home Assistant？

**检查这些：**
1. 设备和 Home Assistant 在同一个 WiFi 吗？
2. Home Assistant 地址填对了吗？
3. Home Assistant 里面启用了 ESPHome 集成吗？

---

### 屏保不显示？

**检查这些：**
1. 屏保开关打开了吗？
   - 设置 → 屏保 → 开关
2. 悬浮窗权限授予了吗？
   - 去手机设置 → 应用 → Ava → 权限 → 悬浮窗 → 允许
3. 超时时间设置了吗？
   - 设置 → 屏保 → 超时时间

---

### 天气不显示？

**检查这些：**
1. 你选的是中国城市吗？（只支持中国城市）
2. 城市选对了吗？
3. 网络连接正常吗？

---

## 📋 权限说明

| 权限 | 为什么需要 |
|------|-----------|
| 麦克风 | 听你说话 |
| 悬浮窗 | 显示屏保、通知、天气等 |
| 摄像头 | 拍照和视频 |
| 网络 | 连接 Home Assistant |
| 蓝牙 | 检测你是否在家 |
| 位置 | 蓝牙扫描需要这个权限 |

---

## 🎨 界面说明

### 主屏幕

```
┌─────────────────────────────┐
│                             │
│        12:34                │
│                             │
│    2026年1月9日 星期四       │
│                             │
│    ☀️ 晴 25°C               │
│                             │
│    春眠不觉晓，处处闻啼鸟    │
│                             │
└─────────────────────────────┘
```

### 设置菜单

```
设置
├── 语音卫星
│   ├── 名称
│   ├── 端口
│   └── 唤醒词
├── 交互
│   ├── 天气
│   ├── 通知场景
│   └── 悬浮窗
├── 屏保
│   ├── 开关
│   ├── 超时
│   └── 类型
├── 浏览器
│   ├── 主页
│   └── 高级设置
└── 实验功能
    ├── 摄像头
    └── 传感器
```

---

## 💡 使用技巧

### 1. 选个好唤醒词

选择一个你容易说出、但平时聊天不常说的词。这样 Ava 不会误触发。

### 2. 保护屏幕

如果设备长期开着屏幕，建议：
- 降低屏幕亮度
- 使用屏保（屏保会移动内容，防止烧屏）

### 3. 保持网络稳定

WiFi 信号好，语音识别就更准确。

### 4. 定期更新

检查应用更新，新版本会有更多功能和修复。

---

## 📞 获取帮助

遇到问题？可以在这里寻求帮助：

- **GitHub Issues**: https://github.com/knoop7/Ava/issues
- **Home Assistant 社区**: https://community.home-assistant.io/

---

## 🙏 致谢

- 原项目: [brownard/Ava](https://github.com/brownard/Ava)
- ESPHome: https://esphome.io/
- Home Assistant: https://www.home-assistant.io/

---

*最后更新: 2026-01-09*
